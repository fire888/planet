!function(){"use strict";var e={uniforms:{red:{value:0},green:{value:.021},blue:{value:.04},tDiffuse:{value:null},light:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#ifdef GL_ES","precision mediump float;","#endif","uniform float red;","uniform float green;","uniform float blue;","uniform sampler2D tDiffuse;","uniform float light;","varying vec2 vUv;","float point (in vec2 uv, in vec2 center, in float radius) {","float len = length(center - uv);","return float(1. - smoothstep(radius, radius + .4, len));","}","void main() {","vec2 uv = vUv;","vec4 diff = texture2D(tDiffuse, uv);","vec2 tileuv = vec2(uv.x, uv.y*0.8) * 100.;","float radius = .03;","vec2 center = floor( tileuv ) + vec2( 0.5, 0.5 );","float point = point( tileuv, center, radius );","vec4 points = vec4( red + light, green + light, blue + light,  (1.01 - diff.y) * point );","vec4 contur = vec4( red + light, green + light, blue + light,  diff.x );","vec4 continents = vec4( red, green, blue, (1.5 - diff.y) * (1.0 - points.z) * 0.01 );","gl_FragColor = contur + continents + points;","}"].join("\n")},n=function(e){t.uniforms.tDiffuse.value=e},t={uniforms:{tDiffuse:{type:"t",value:null},light:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tDiffuse;","uniform float light;","void main() {","vec2 uv = vUv;","vec4 txt = texture2D(tDiffuse, uv);","gl_FragColor = vec4( txt.xyz * vec3( 1.5, 1.9, 2.6) * light, txt.x*2.0);","}"].join("\n")},i={uniforms:{color:{value:new THREE.Vector3(1,1,1)},dark:{value:0},time:{value:1.1}},vertexShader:["uniform float dark;","varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float dark;","uniform vec3 color;","uniform float time;","varying vec2 vUv;","void main() {","vec2 st = vUv.xy;","float translate = fract(time*0.13);","st.y -= translate*5.1980;","float line = float(sin(st.y/0.0915));","gl_FragColor = vec4( 0.3 - dark*2.0, 0.6 + line*0.2 - dark*2.0, 1.1 + line*0.4 - dark*2.0, 1.0 );","}"].join("\n")},o={earthRed:0,earthGreen:.04,earthBlue:.08,glowRed:0,glowGreen:.19,glowBlue:.22,glowLight:0,glowBorder:2.9,wireColor:"#ffae23",wireDiodRed:.9,wireDiodGreen:.9,wireDiodBlue:.9,earthLeftMax:-2,earthRightMax:.45,earthAxell:85e-5,earthMaxSpd:.017,earthSpdFree:.015},r=function(){T()},a="DARK",s=function(){return a="FLASH"},l=function(){"FLASH"==a&&C()&&ie()&&(a="LIGHT"),P(a),$(a),ae(a)},c=void 0,u=void 0,d={textures:{glow:null,continents:null},geoms:{corpus:null,diod:null,globe:null}},f=function(e){c=new THREE.TextureLoader,u=new THREE.OBJLoader,new Promise(function(e){d.textures.continents=c.load("assets/contour.jpg",function(){e()})}).then(function(){new Promise(function(e){d.textures.glow=c.load("assets/glow.png",function(){e()})})}).then(function(){return new Promise(function(e){u.load("assets/connector.obj",function(n){n.traverse(function(n){n instanceof THREE.Mesh==1&&("diod"==n.name&&(d.geoms.diod=n.geometry),"iron"==n.name&&(d.geoms.corpus=n.geometry),d.geoms.diod&&d.geoms.corpus&&e())})})})}).then(function(){return new Promise(function(e){u.load("assets/globe.obj",function(n){n.traverse(function(n){n instanceof THREE.Mesh==1&&(d.geoms.globe=n.geometry,e())})})})}).then(function(){c=null,u=null,e()})},v=void 0,h=void 0,g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{canvas:"none..",w:window.innerWidth,h:window.innerHeight},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{canvas:"none..",w:window.innerWidth,h:window.innerHeight};v=e.canvas,h=n.canvas,y(),E(e),R(n),re(),k(),Z(),H(e,n)},x=void 0,p=void 0,m=void 0,M=void 0,w=void 0,y=function(){var e=new THREE.PointLight(252791645,.3);e.position.set(500,500,600);var n=new THREE.AmbientLight(9046131,.2);x=new THREE.Scene,x.add(e,n)},E=function(e){m=new THREE.WebGLRenderer({canvas:e.canvas}),p=new THREE.PerspectiveCamera(20,e.w/e.h,3.5,25e3),p.position.set(0,0,7200)},R=function(e){M=new THREE.WebGLRenderer({canvas:e.canvas}),w=new THREE.PerspectiveCamera(20,e.w/e.h,3.5,15e3),w.position.set(0,9e3,5e3),w.rotation.x=-.8,M.render(x,w)},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{w:window.innerWidth,h:window.innerHeight},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{w:window.innerWidth,h:window.innerHeight};e.h/e.w-.5<1?(p.position.x=800*(e.h/e.w-.5)-800,p.position.z=7200,_.position.x=65):(p.position.x=0,p.position.z=1e4,_.position.x=0),m.setSize(e.w,e.h),p.aspect=e.w/e.h,p.updateProjectionMatrix(),M.setSize(n.w,n.h),w.aspect=n.w/n.h,w.updateProjectionMatrix()},T=function e(){var n=b(v),t=b(h);(n||t)&&l(),n&&m.render(x,p),t&&M.render(x,w),requestAnimationFrame(e)},b=function(e){var n=e.getBoundingClientRect(),t=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(n.bottom<0||n.top-t>=0)},L=void 0,S=void 0,_=void 0,k=function(){_=B(),_.position.set(65,0,-610),S=D(),L=new THREE.Group,L.rotation.z=-.3,L.rotation.x=.5,S.rotation.y=.7,x.add(L.add(S),_),_.lookAt(p.position)},D=function(){var n=new THREE.Mesh(d.geoms.globe,new THREE.ShaderMaterial(e));return n.material.transparent=!0,n.material.side=THREE.DoubleSide,n.material.depthWrite=!1,n.material.needsUpdate=!0,n.material.uniforms.tDiffuse.value=d.textures.continents,n},B=function(){var e=new THREE.PlaneGeometry(1900,1900);n(d.textures.glow);var i=new THREE.ShaderMaterial(t);return i.transparent=!0,new THREE.Mesh(e,i)},G=.002,A="left",Y=new THREE.Clock,P=function(e){L&&("DARK"==e&&W(),"FLASH"==e&&j(),S.rotation.y+=G)},W=function(){S.rotation.y>o.earthLeftMax&&"left"==A&&(A="right"),S.rotation.y<o.earthRightMax&&"right"==A&&(A="left"),"left"==A&&Math.abs(G+o.earthAxell)<o.earthMaxSpd&&(G+=o.earthAxell),"right"==A&&Math.abs(G-o.earthAxell)<o.earthMaxSpd&&(G-=o.earthAxell)},j=function(){G<o.earthSpdFree?G+=3e-4:G=o.earthSpdFree,S.material.uniforms.light.value<1.35&&(S.material.uniforms.light.value+=.012),t.uniforms.light.value<1.5&&(t.uniforms.light.value+=.12)},C=function(){return G==o.earthSpdFree},I=[],U=[{length:-3e3,dirY:6,dirZ:.7},{length:-4500,dirY:.2,dirZ:1.8},{length:-3500,dirY:3.24,dirZ:.8},{length:-4500,dirY:1.5,dirZ:.8},{length:-4500,dirY:1.9,dirZ:1.8},{length:-5500,dirY:3.7,dirZ:2}],F=void 0,z=void 0,V=void 0,Z=function(){z=K(),V=N(),F=new THREE.Group,U.forEach(function(e){var n=O(),t=q(e.length);n.plug.add(t);var i=new THREE.Group;i.add(n.plug),i.position.set(Math.sin(e.dirZ)*Math.sin(e.dirY)*890,890*Math.cos(e.dirZ),Math.sin(e.dirZ)*Math.cos(e.dirY)*890),i.lookAt(0,0,0),I.push({connector:i,plug:n.plug,corpus:n.corpus,diod:n.diod,wire:t,length:e.length}),F.add(i)}),S.add(F)},K=function(){return new THREE.MeshPhongMaterial({color:789017,emissive:0,specular:16777215,shininess:300})},N=function(){return new THREE.ShaderMaterial(i)},O=function(){var e=new THREE.Mesh(d.geoms.corpus,z),n=new THREE.Mesh(d.geoms.diod,V),t=new THREE.Group;return t.add(n,e),{plug:t,corpus:e,diod:n}},q=function(e){var n=new THREE.QuadraticBezierCurve3(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-1e3),new THREE.Vector3(0,0,e)),t=new THREE.TubeBufferGeometry(n,10,25,8,!1);return new THREE.Mesh(t,z)},Q=function(){if(0!=I.length){for(var e=0;e<I.length;e++){I[e].plug.remove(I[e].corpus),I[e].plug.remove(I[e].diod),F.remove(I[e].plug),F.remove(I[e].wire);I[e];I.splice(e,1),e--,null}x.remove(F),I=[]}},X=.005,J="DARK",$=function(e){0!=I.length&&("DARK"==e&&ee(),"FLASH"==e&&("DARK"==J&&(ne(),J="FLASH"),te()))},ee=function(){var e=Y.getDelta();V.uniforms.time.value+=e,I.forEach(function(e){e.plug&&e.wire&&(-3e3==e.length?e.wire.geometry.parameters.path.v2.y=-4e3*Math.sin(S.rotation.y-.4):e.wire.geometry.parameters.path.v2.x=5e3*Math.sin(S.rotation.y-.4),e.wire.geometry.parameters.path.v2.x=5e3*Math.sin(S.rotation.y-.4),e.wire.geometry.dispose(),e.wire.geometry=new THREE.TubeBufferGeometry(e.wire.geometry.parameters.path,30,25,8,!1),e.wire.geometry.needsUpdate=!0)})},ne=function(){S.getWorldQuaternion(F.quaternion),S.remove(F),x.add(F)},te=function(){V.uniforms.dark.value+=.01,X+=.6,I.forEach(function(e){e.plug.position.z-=X})},ie=function(){return 0==I.length||(!I[0].plug||I[0].plug.position.z<-5e3&&(Q(),!0))},oe=[],re=function(){var e=new THREE.Group;x.add(e),e.rotation.x=-1,e.position.set(0,0,-6600);for(var n=new THREE.MeshPhongMaterial({color:2024890,emissive:0,specular:12632256,shininess:100}),t=new THREE.CubeGeometry(1e3,1e3,1e3),i=0;i<20;i++)for(var o=0;o<20;o++){var r=new THREE.Mesh(t,n);e.add(r),r.position.set(1e3*o-1e4,1e3*i-5e3,0),r.rotation.x=o/5+i/5,oe.push(r)}},ae=function(e){oe.forEach(function(e){e.rotation.x+=.01})},se={"canvas-dr01":{canvas:null,ctx:null,sprites_types:[{type:"LinesVert",count:5},{type:"LinesHor",count:2}],sprites:[],imgs:{back:{src:"assets/ill_01_back.png",data:null}}},"canvas-dr02":{canvas:null,ctx:null,sprites_types:[{type:"LeftYellowSlow",count:70},{type:"RightWhite",count:10}],sprites:[],imgs:{back:{src:"assets/ill_02_back.png",data:null}}},"canvas-dr03":{canvas:null,ctx:null,sprites_types:[{type:"LeftYellow",count:70},{type:"RightYellow",count:70}],sprites:[],imgs:{back:{src:"assets/ill_03_back.png",data:null}}},"canvas-dr04":{canvas:null,ctx:null,sprites:[],sprites_types:[{type:"LeftYellow",count:50},{type:"LeftMagenta",count:50},{type:"LeftGreen",count:50},{type:"RightYellow",count:50},{type:"RightMagenta",count:50},{type:"RightGreen",count:50}],imgs:{back:{src:"assets/ill_04_back.png",data:null},wire:{src:"assets/ill_04_wire.png",data:null,x:0,y:0,x2:500,y2:400}}},"canvas-dr05":{canvas:null,ctx:null,sprites:[],sprites_types:[{type:"LeftSuperTop",count:70},{type:"LeftSuperBottom",count:50},{type:"RightSuperTop",count:50},{type:"RightSuperBottom",count:50}],imgs:{back:{src:"assets/ill_05_back.png",data:null}}}},le={LeftYellowSlow:{conus:1,spd:.6,start:{xMin:-20,xMax:-10,yMin:80,yMax:300},finish:{xMin:160,xMax:280,yMin:80,yMax:300},form:"rect",color:"#ff0"},RightWhite:{conus:1,spd:.6,start:{xMin:310,xMax:320,yMin:185,yMax:187},finish:{xMin:500,xMax:510,yMin:110,yMax:230},form:"circle",color:"#fff"},LeftYellow:{conus:1,spd:1,start:{xMin:-20,xMax:-10,yMin:80,yMax:300},finish:{xMin:160,xMax:280,yMin:150,yMax:205},form:"rect",color:"#ff0"},LeftMagenta:{conus:1,spd:1,start:{xMin:-20,xMax:-10,yMin:80,yMax:300},finish:{xMin:160,xMax:280,yMin:130,yMax:235},form:"rect",color:"#f0f"},LeftGreen:{conus:1,spd:1,start:{xMin:-20,xMax:-10,yMin:80,yMax:300},finish:{xMin:160,xMax:280,yMin:130,yMax:235},form:"rect",color:"#0f0"},RightYellow:{conus:1,spd:1,start:{xMin:320,xMax:330,yMin:150,yMax:205},finish:{xMin:500,xMax:510,yMin:80,yMax:300},form:"rect",color:"#ff0"},RightMagenta:{conus:1,spd:1,start:{xMin:320,xMax:330,yMin:130,yMax:235},finish:{xMin:500,xMax:510,yMin:80,yMax:300},form:"rect",color:"#f0f"},RightGreen:{conus:1,spd:1,start:{xMin:320,xMax:330,yMin:130,yMax:235},finish:{xMin:500,xMax:510,yMin:80,yMax:300},form:"rect",color:"#0f0"},RightSuperTop:{conus:1,spd:1,start:{xMin:325,xMax:330,yMin:120,yMax:170},finish:{xMin:500,xMax:510,yMin:80,yMax:150},form:"rect",color:"#0ff"},RightSuperBottom:{conus:1,spd:1,start:{xMin:325,xMax:330,yMin:240,yMax:270},finish:{xMin:500,xMax:510,yMin:220,yMax:310},form:"rect",color:"#0ff"},LeftSuperTop:{conus:1,spd:1,start:{xMin:-20,xMax:-10,yMin:80,yMax:150},finish:{xMin:140,xMax:160,yMin:120,yMax:170},form:"rect",color:"#0ff"},LeftSuperBottom:{conus:1,spd:1,start:{xMin:-20,xMax:-10,yMin:220,yMax:310},finish:{xMin:140,xMax:160,yMin:240,yMax:270},form:"rect",color:"#0ff"},LinesVert:{conus:0,spd:.2,start:{xMin:-200,xMax:-30,yMin:0,yMax:0},finish:{xMin:600,xMax:600,yMin:0,yMax:0},color:null,img:"lineVert-img"},LinesHor:{conus:0,spd:.1,start:{xMin:0,xMax:0,yMin:800,yMax:900},finish:{xMin:0,xMax:0,yMin:-40,yMax:-60},color:null,img:"lineHor-img"}},ce={"lineHor-img":{src:"assets/sprite_line_hor.png",data:null},"lineVert-img":{src:"assets/sprite_line_vert.png",data:null}},ue=[],de=0,fe=function(e){ve(function(){ge(se),we(),e()})},ve=function(e){for(var n in se)for(var t in se[n].imgs)ue.push(he(se[n].imgs[t]));for(var i in ce)ue.push(he(ce[i]));ue.push(e),ue[0]()},he=function(e){return function(){e.data=new Image,e.data.src=e.src,e.data.onload=function(){return ue[de++]()}}},ge=function(e){for(var n in e)e[n].canvas=document.getElementById(n),e[n].ctx=e[n].canvas.getContext("2d"),xe(e[n])},xe=function(e){e.sprites_types.forEach(function(n){e.sprites.push(pe(n.type,n.count))})},pe=function(e,n){for(var t=[],i=0;i<n;i++){var o={};me(o,e),t.push(o)}return t},me=function(e,n){var t=le[n],i=30*Math.random()+30;e.type=n,e.x=Math.random()*(t.start.xMax-t.start.xMin)+t.start.xMin,e.y=Math.random()*(t.start.yMax-t.start.yMin)+t.start.yMin,e.spdX=(t.finish.xMin-e.x)/i*t.spd,e.spdY=(t.finish.yMin-e.y+Math.random()*(t.finish.yMax-t.finish.yMin)*t.conus)/i*t.spd},Me=void 0,we=function(){Me=setInterval(ye,30)},ye=function(){for(var e in se)Ee(se[e].canvas)&&Re(se[e])},Ee=function(e){var n=e.getBoundingClientRect(),t=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(n.bottom<0||n.top-t>=0)},Re=function(e){e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.globalCompositeOperation="source-over",e.ctx.drawImage(e.imgs.back.data,0,0,e.canvas.width,e.canvas.height),He(e),e.imgs.wire&&e.ctx.drawImage(e.imgs.wire.data,e.imgs.wire.x,e.imgs.wire.y,e.imgs.wire.x2,e.imgs.wire.y2),e.ctx.globalCompositeOperation="destination-in",e.ctx.drawImage(e.imgs.back.data,0,0,e.canvas.width,e.canvas.height)},He=function(e){for(var n=0;n<e.sprites.length;n++)for(var t=0;t<e.sprites[n].length;t++)Te(e.ctx,e.sprites[n][t])},Te=function(e,n){var t=le[n.type];return n.x>t.finish.xMin&&me(n,n.type),"LinesHor"==n.type&&n.y<t.finish.yMin&&me(n,n.type),n.x+=n.spdX,n.y+=n.spdY,t.img?void e.drawImage(ce[t.img].data,n.x,n.y):"rect"==t.form?(e.fillStyle=le[n.type].color,void e.fillRect(n.x,n.y,7,7)):"circle"==t.form?(e.fillStyle=le[n.type].color,e.beginPath(),e.arc(n.x,n.y,4,0,2*Math.PI),void e.fill()):void 0};window.onload=function(){fe(function(){f(function(){g({canvas:document.getElementById("webgl"),w:window.innerWidth,h:window.innerHeight},{canvas:document.getElementById("webgl_bottom"),w:window.innerWidth,h:.5*window.innerWidth}),r(),Be(document.getElementById("webgl")),Ge(document.getElementById("preloader")),_e(s),Le(H)})})};var be=void 0,Le=function(e){be=e,window.addEventListener("resize",function(){be({w:window.innerWidth,h:window.innerHeight},{w:window.innerWidth,h:.5*window.innerWidth})},!1)},Se=void 0,_e=function(e){Se=e,document.addEventListener("wheel",De,!1),document.addEventListener("scroll",De,!1),document.addEventListener("touchstart",De,!1)},ke=function(){document.removeEventListener("wheel",De,!1),document.removeEventListener("scroll",De,!1),document.removeEventListener("touchstart",De,!1)},De=function(){Se(),ke(),setTimeout(function(){document.getElementById("slogan").className="show"},500)},Be=function(e){return e.className="show"},Ge=function(e){e.className="hide",setTimeout(function(){e.className="hidden"},1e3)}}();
