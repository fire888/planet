!function(){"use strict";function e(){i(function(){r(),t()})}function t(){H=setInterval(n,30)}function n(){for(var e in Me)o(Me[e])}function i(e){for(var t in Me)!function(e){for(var t in Me[e].imgs)!function(t){ye.push(function(){Me[e].imgs[t].data=new Image,Me[e].imgs[t].data.src=Me[e].imgs[t].src,Me[e].imgs[t].data.onload=function(){He++,ye[He]()}})}(t)}(t);ye.push(function(){e()}),ye[0]()}function r(){for(var e in Me)Me[e].canvas=document.getElementById(e),Me[e].ctx=Me[e].canvas.getContext("2d"),a(e)}function o(e){e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.globalCompositeOperation="source-over",e.ctx.drawImage(e.imgs.back.data,0,0,e.canvas.width,e.canvas.height),u(e),e.imgs.wire&&e.ctx.drawImage(e.imgs.wire.data,100,100),e.ctx.globalCompositeOperation="destination-in",e.ctx.drawImage(e.imgs.back.data,0,0,e.canvas.width,e.canvas.height)}function a(e){"dr01"==e&&Me[e].sprites.push(s("LeftNORM",200)),"dr02"==e&&Me[e].sprites.push(s("LeftNORM",200)),"dr03"==e&&Me[e].sprites.push(s("LeftNORM",200)),"dr04"==e&&Me[e].sprites.push(s("LeftNORM",200)),"dr05"==e&&Me[e].sprites.push(s("LeftNORM",200))}function s(e,t){for(var n=[],i=0;i<t;i++){var r={};l(r,e),n.push(r)}return n}function l(e,t){var n=Re[t];e.type=t,e.x=Math.random()*n.start.xMax+n.start.xMin,e.y=Math.random()*n.start.yMax+n.start.yMin,e.spdX=Math.random()*n.spd.xMax+n.spd.xMin,e.spdY=Math.random()*n.spd.yMax+n.spd.yMin,e.color=n.color}function u(e){for(var t=0;t<e.sprites.length;t++)for(var n=0;n<e.sprites[t].length;n++)c(e,e.sprites[t][n])}function c(e,t){t.x>Re[t.type].finish.xMin&&l(t,t.type),t.x+=t.spdX,t.y+=t.spdY,e.ctx.fillStyle=t.color,e.ctx.fillRect(t.x,t.y,20,20)}var d={uniforms:{red:{value:0},green:{value:.021},blue:{value:.04},tDiffuse:{value:null},light:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#ifdef GL_ES","precision mediump float;","#endif","uniform float red;","uniform float green;","uniform float blue;","uniform sampler2D tDiffuse;","uniform float light;","varying vec2 vUv;","float point (in vec2 uv, in vec2 center, in float radius) {","float len = length(center - uv);","return float(1. - smoothstep(radius, radius + .6, len));","}","void main() {","vec2 uv = vUv;","vec4 diff = texture2D(tDiffuse, uv);","vec2 tileuv = vec2(uv.x, uv.y*0.8) * 180.;","float radius = .03;","vec2 center = floor( tileuv ) + vec2( 0.5, 0.5 );","float point = point( tileuv, center, radius );","vec4 points = vec4( red + light, green + light, blue + light,  (1.01 - diff.y) * point );","vec4 contur = vec4( red + light, green + light, blue + light,  diff.x );","vec4 continents = vec4( red, green, blue, (1.5 - diff.y) * (1.0 - points.z) * 0.01 );","gl_FragColor = contur + continents + points;","}"].join("\n")},f={uniforms:{viewVector:{value:new THREE.Vector3(-800,-200,8200)},light:{value:.3},glowColor:{value:new THREE.Vector3(0,.24,.47)},border:{value:3.3}},vertexShader:["uniform vec3 viewVector;","uniform float light;","uniform float border;","varying float intensity;","void main() {","vec3 vNormal = normalize( normalMatrix * normal );","vec3 vNormel = normalize( normalMatrix * viewVector );","intensity = pow( abs(light) - dot(vNormal, vNormel), border );","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 glowColor;","uniform float light;","varying float intensity;","void main() {","vec3 glow = ( glowColor + light ) * intensity;","gl_FragColor = vec4( glow, 1.0 );","}"].join("\n")},v={uniforms:{color:{value:new THREE.Vector3(1.5,1.5,1.9)},light:{value:1}},vertexShader:["uniform float light;","void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float light;","uniform vec3 color;","void main() {","gl_FragColor = vec4( color * light, 1.0 );","}"].join("\n")},h=void 0,m=function(){var e=document.getElementById("app-webgl"),t=e.clientWidth||e.offsetWidth;return t>window.innerWidth&&(t=window.innerWidth),t},g=function(e){h=e,window.addEventListener("resize",function(){h(m())},!1)},p=void 0,w=function(e){p=e,document.addEventListener("wheel",E,!1),document.addEventListener("scroll",E,!1),document.addEventListener("touchstart",E,!1)},E=function(){p(),x(),setTimeout(function(){document.getElementById("slogan").className="show"},500)},x=function(){document.removeEventListener("wheel",E,!1),document.removeEventListener("scroll",E,!1),document.removeEventListener("touchstart",E,!1)},M=function(){document.getElementById("webgl").className="show"},R=function(){var e=document.getElementById("preloader");e.className="hide",setTimeout(function(){e.className="hidden"},1e3)};window.onload=function(){e(),D(function(){var e=m();F(e),V(e),g(V),b(),Ee(),W(),oe(),P(),M(),R(),w(L)})};var y,H,T=function(){this.earthRed=0,this.earthGreen=.04,this.earthBlue=.08,this.glowRed=0,this.glowGreen=.19,this.glowBlue=.22,this.glowLight=0,this.glowBorder=2.9,this.wireColor="#ffae23",this.wireDiodRed=.9,this.wireDiodGreen=.9,this.wireDiodBlue=.9,this.earthLeftMax=-2,this.earthRightMax=.45,this.earthAxell=85e-5,this.earthMaxSpd=.017,this.earthSpdFree=.015},b=function(){y=new T},_="DARK",L=function(){return _="FLASH"},S=function(){"FLASH"==_&&$()&&pe()&&(_="LIGHT"),Q(_),ve(_),xe(_)},A=void 0,G=void 0,B={textures:{waterNormals:null,continents:null},geoms:{corpus:null,diod:null}},D=function(e){A=new THREE.TextureLoader,G=new THREE.OBJLoader,new Promise(function(e){B.textures.continents=A.load("assets/contour.jpg",function(){e()})}).then(function(){return new Promise(function(e){G.load("assets/connector.obj",function(t){t.traverse(function(t){t instanceof THREE.Mesh==1&&("diod"==t.name&&(B.geoms.diod=t.geometry),"iron"==t.name&&(B.geoms.corpus=t.geometry),B.geoms.diod&&B.geoms.corpus&&e())})})})}).then(function(){A=null,G=null,e()})},N=void 0,I=void 0,j=void 0,k=void 0,C=void 0,F=function(e){j=new THREE.WebGLRenderer({canvas:document.getElementById("webgl")}),k=new THREE.WebGLRenderer({canvas:document.getElementById("webgl_bottom")}),I=new THREE.PerspectiveCamera(20,e/(.7*e),3.5,15e3),I.position.set(-800,-200,8200),C=I.clone(),C.position.set(0,0,8200);var t=new THREE.PointLight(252791645,.2);t.position.set(1e3,3e3,2e3);var n=new THREE.AmbientLight(9046131,.2);N=new THREE.Scene,N.add(t,n)},V=function(e){j.setSize(e,.7*e),I.aspect=e/(.7*e),I.updateProjectionMatrix(),k.setSize(e,.3*e),C.aspect=e/(.3*e),C.updateProjectionMatrix()},P=function e(){S(),j.render(N,I),"LIGHT"==_&&k.render(N,C),requestAnimationFrame(e)},z=void 0,Y=void 0,O=void 0,W=function(){O=U(),Y=Z(),z=new THREE.Group,z.rotation.z=-.3,z.rotation.x=.5,Y.rotation.y=.85,N.add(z.add(Y),O)},Z=function(){var e=new THREE.Mesh(new THREE.SphereGeometry(608,40,40),new THREE.ShaderMaterial(d));return e.material.transparent=!0,e.material.side=THREE.DoubleSide,e.material.depthWrite=!1,e.material.needsUpdate=!0,e.material.uniforms.tDiffuse.value=B.textures.continents,e},U=function(){var e=new THREE.Mesh(new THREE.SphereGeometry(780,40,40),new THREE.ShaderMaterial(f));return e.material.transparent=!0,e.material.blending=THREE.AdditiveBlending,e.material.side=THREE.DoubleSide,e.material.depthWrite=!1,e.material.needsUpdate=!0,e},K=.002,q="left",Q=function(e){z&&("DARK"==e&&X(),"FLASH"==e&&J(),Y.rotation.y+=K)},X=function(){Y.rotation.y>y.earthLeftMax&&"left"==q&&(q="right"),Y.rotation.y<y.earthRightMax&&"right"==q&&(q="left"),"left"==q&&Math.abs(K+y.earthAxell)<y.earthMaxSpd&&(K+=y.earthAxell),"right"==q&&Math.abs(K-y.earthAxell)<y.earthMaxSpd&&(K-=y.earthAxell)},J=function(){K<y.earthSpdFree?K+=3e-4:K=y.earthSpdFree,Y.material.uniforms.light.value<1.35&&(Y.material.uniforms.light.value+=.012),O.material.uniforms.light.value<.1&&(O.material.uniforms.light.value+=.0034)},$=function(){return K==y.earthSpdFree},ee=[],te=[{dirY:6.08,dirZ:.8},{dirY:.2,dirZ:1.8},{dirY:3.24,dirZ:.8},{dirY:1.5,dirZ:.8},{dirY:1.9,dirZ:1.8},{dirY:3.7,dirZ:2}],ne=void 0,ie=void 0,re=void 0,oe=function(){ie=ae(),re=se(),ne=new THREE.Group,te.forEach(function(e){var t=le(),n=ue();t.add(n);var i=new THREE.Group;i.add(t),i.position.set(Math.sin(e.dirZ)*Math.sin(e.dirY)*795,795*Math.cos(e.dirZ),Math.sin(e.dirZ)*Math.cos(e.dirY)*795),i.lookAt(0,0,0),ee.push({connector:i,plug:t,wire:n}),ne.add(i)}),Y.add(ne)},ae=function(){return new THREE.MeshPhongMaterial({color:789017,emissive:0,specular:16777215,shininess:100})},se=function(){return new THREE.ShaderMaterial(v)},le=function(){var e=new THREE.Mesh(B.geoms.corpus,ie),t=new THREE.Mesh(B.geoms.diod,re),n=new THREE.Group;return n.add(t,e),n},ue=function(){var e=new THREE.QuadraticBezierCurve3(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-1e3),new THREE.Vector3(0,0,-3500)),t=new THREE.TubeBufferGeometry(e,10,25,8,!1);return new THREE.Mesh(t,ie)},ce=function(){if(0!=ee.length){for(var e=0;e<ee.length;e++){ne.remove(ee[e].plug),ne.remove(ee[e].wire);ee[e];ee.splice(e,1),e--}N.remove(ne),ee=[]}},de=.005,fe="DARK",ve=function(e){0!=ee.length&&("DARK"==e&&he(),"FLASH"==e&&("DARK"==fe&&(me(),fe="FLASH"),ge()))},he=function(){ee.forEach(function(e){e.plug&&e.wire&&(e.wire.geometry.parameters.path.v2.x=5e3*Math.sin(Y.rotation.y-.4),e.wire.geometry.dispose(),e.wire.geometry=new THREE.TubeBufferGeometry(e.wire.geometry.parameters.path,30,25,8,!1),e.wire.geometry.needsUpdate=!0)})},me=function(){Y.getWorldQuaternion(ne.quaternion),Y.remove(ne),N.add(ne)},ge=function(){re.uniforms.light.value-=.01,de+=.6,ee.forEach(function(e){e.plug.position.z-=de})},pe=function(){return 0==ee.length||(!ee[0].plug||ee[0].plug.position.z<-5e3&&(ce(),!0))},we=[],Ee=function(){for(var e=new THREE.MeshPhongMaterial({color:2024890,emissive:0,specular:12632256,shininess:100}),t=new THREE.CubeGeometry(600,600,600),n=0;n<20;n++)for(var i=0;i<20;i++){var r=new THREE.Mesh(t,e);N.add(r),r.position.set(600*i-5e3,600*n-3e3,-6e3),r.rotation.x=i/5+n/5,we.push(r)}},xe=function(e){we.forEach(function(e){e.rotation.x+=.01})},Me={dr01:{canvas:null,ctx:null,sprites:[],imgs:{back:{src:"assets/ill_01_back.png",data:null},wire:{src:"assets/ill_02_wire.png",data:null}}},dr02:{canvas:null,ctx:null,sprites:[],imgs:{back:{src:"assets/ill_02_back.png",data:null},wire:{src:"assets/ill_02_wire.png",data:null},wire_blur:{src:"assets/ill_02_wire_blur.png",data:null}}},dr03:{canvas:null,ctx:null,sprites:[],imgs:{back:{src:"assets/ill_03_back.png",data:null},wire:{src:"assets/ill_02_wire.png",data:null},wire_blur:{src:"assets/ill_02_wire_blur.png",data:null}}},dr04:{canvas:null,ctx:null,sprites:[],imgs:{back:{src:"assets/ill_04_back.png",data:null},wire:{src:"assets/ill_02_wire.png",data:null}}},dr05:{canvas:null,ctx:null,sprites:[],imgs:{back:{src:"assets/ill_05_back.png",data:null},wire:{src:"assets/ill_02_wire.png",data:null}}}},Re={LeftNORM:{start:{xMin:0,xMax:50,yMin:50,yMax:200},finish:{xMin:600,xMax:400},spd:{xMin:1.5,xMax:2.5,yMin:0,yMax:0},color:"rgba(255, 255, 0, 1.0)"}},ye=[],He=0}();
